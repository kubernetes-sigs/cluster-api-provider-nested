<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="839px" preserveAspectRatio="none" style="width:441px;height:839px;background:#FFFAFA;" version="1.1" viewBox="0 0 441 839" width="441px" zoomAndPan="magnify"><defs><filter height="300%" id="fvwjt4317flyt" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="217.5" cy="20" fill="#000000" filter="url(#fvwjt4317flyt)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#fvwjt4317flyt)" height="48.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="243" x="96" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="215" x="110" y="71.6016">User Apply KubeadmControlPlane CR</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="189" x="125" y="85.7344">and NestedMachineTemplate CR</text><rect fill="#FEFECE" filter="url(#fvwjt4317flyt)" height="48.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="251" x="92" y="162.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="223" x="106" y="183.8672">KubeadmControlPlane controller check</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="142" x="148.5" y="198">if NestedCluster is ready</text><polygon fill="#FEFECE" filter="url(#fvwjt4317flyt)" points="217.5,118.2656,229.5,130.2656,217.5,142.2656,205.5,130.2656,217.5,118.2656" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#FEFECE" filter="url(#fvwjt4317flyt)" points="202,230.5313,233,230.5313,245,242.5313,233,254.5313,202,254.5313,190,242.5313,202,230.5313" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="202" y="246.6885">exist?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="245" y="240.2109">no</text><rect fill="#FEFECE" filter="url(#fvwjt4317flyt)" height="48.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="413" x="11" y="295.8066"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="385" x="25" y="317.4082">KubeadmControlPlane controller uses the NestedMachineTemplate</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="149" x="145" y="331.541">to create NestedMachines</text><rect fill="#FEFECE" filter="url(#fvwjt4317flyt)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="409" x="13" y="364.0723"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="385" x="27" y="385.6738">KubeadmControlPlane controller generates the KubeadmConfig CR</text><rect fill="#FEFECE" filter="url(#fvwjt4317flyt)" height="48.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="355" x="40" y="418.2051"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="313" x="61" y="439.8066">KubeadmControlPlane controller sets ObjectReference</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="331" x="54" y="453.9395">to the KubeadmConfig CR for the owned NestedMachines</text><rect fill="#FEFECE" filter="url(#fvwjt4317flyt)" height="48.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="346" x="44.5" y="530.4707"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="189" x="121" y="552.0723">NestedMachines controller check</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="322" x="58.5" y="566.2051">if the KubeadmConfig is assigned to the NestedMachine</text><polygon fill="#FEFECE" filter="url(#fvwjt4317flyt)" points="217.5,486.4707,229.5,498.4707,217.5,510.4707,205.5,498.4707,217.5,486.4707" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#FEFECE" filter="url(#fvwjt4317flyt)" points="186,598.7363,249,598.7363,261,610.7363,249,622.7363,186,622.7363,174,610.7363,186,598.7363" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="186" y="614.8936">is attached?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="261" y="608.416">no</text><rect fill="#FEFECE" filter="url(#fvwjt4317flyt)" height="48.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="235" x="100" y="664.0117"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="207" x="114" y="685.6133">NestedMachine controller generates</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="134" x="152.5" y="699.7461">the static pod template</text><rect fill="#FEFECE" filter="url(#fvwjt4317flyt)" height="48.2656" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="220" x="107.5" y="732.2773"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="192" x="121.5" y="753.8789">NestedMachine controller creates</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="127" x="156" y="768.0117">the statefulset objects</text><ellipse cx="217.5" cy="811.543" fill="#FFFFFF" filter="url(#fvwjt4317flyt)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="217.5" cy="811.543" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="217.5" x2="217.5" y1="30" y2="50"/><polygon fill="#A80036" points="213.5,40,217.5,50,221.5,40,217.5,44" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="217.5" x2="217.5" y1="142.2656" y2="162.2656"/><polygon fill="#A80036" points="213.5,152.2656,217.5,162.2656,221.5,152.2656,217.5,156.2656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="245" x2="355" y1="242.5313" y2="242.5313"/><polygon fill="#A80036" points="351,196.3984,355,186.3984,359,196.3984,355,192.3984" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="355" x2="355" y1="130.2656" y2="242.5313"/><line style="stroke:#A80036;stroke-width:1.5;" x1="355" x2="229.5" y1="130.2656" y2="130.2656"/><polygon fill="#A80036" points="239.5,126.2656,229.5,130.2656,239.5,134.2656,235.5,130.2656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="217.5" x2="217.5" y1="210.5313" y2="230.5313"/><polygon fill="#A80036" points="213.5,220.5313,217.5,230.5313,221.5,220.5313,217.5,224.5313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="217.5" x2="217.5" y1="98.2656" y2="118.2656"/><polygon fill="#A80036" points="213.5,108.2656,217.5,118.2656,221.5,108.2656,217.5,112.2656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="217.5" x2="217.5" y1="254.5313" y2="295.8066"/><polygon fill="#A80036" points="213.5,285.8066,217.5,295.8066,221.5,285.8066,217.5,289.8066" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="221.5" y="275.9863">yes</text><line style="stroke:#A80036;stroke-width:1.5;" x1="217.5" x2="217.5" y1="344.0723" y2="364.0723"/><polygon fill="#A80036" points="213.5,354.0723,217.5,364.0723,221.5,354.0723,217.5,358.0723" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="217.5" x2="217.5" y1="398.2051" y2="418.2051"/><polygon fill="#A80036" points="213.5,408.2051,217.5,418.2051,221.5,408.2051,217.5,412.2051" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="217.5" x2="217.5" y1="510.4707" y2="530.4707"/><polygon fill="#A80036" points="213.5,520.4707,217.5,530.4707,221.5,520.4707,217.5,524.4707" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="261" x2="402.5" y1="610.7363" y2="610.7363"/><polygon fill="#A80036" points="398.5,564.6035,402.5,554.6035,406.5,564.6035,402.5,560.6035" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="402.5" x2="402.5" y1="498.4707" y2="610.7363"/><line style="stroke:#A80036;stroke-width:1.5;" x1="402.5" x2="229.5" y1="498.4707" y2="498.4707"/><polygon fill="#A80036" points="239.5,494.4707,229.5,498.4707,239.5,502.4707,235.5,498.4707" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="217.5" x2="217.5" y1="578.7363" y2="598.7363"/><polygon fill="#A80036" points="213.5,588.7363,217.5,598.7363,221.5,588.7363,217.5,592.7363" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="217.5" x2="217.5" y1="466.4707" y2="486.4707"/><polygon fill="#A80036" points="213.5,476.4707,217.5,486.4707,221.5,476.4707,217.5,480.4707" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="217.5" x2="217.5" y1="622.7363" y2="664.0117"/><polygon fill="#A80036" points="213.5,654.0117,217.5,664.0117,221.5,654.0117,217.5,658.0117" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="221.5" y="644.1914">yes</text><line style="stroke:#A80036;stroke-width:1.5;" x1="217.5" x2="217.5" y1="712.2773" y2="732.2773"/><polygon fill="#A80036" points="213.5,722.2773,217.5,732.2773,221.5,722.2773,217.5,726.2773" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="217.5" x2="217.5" y1="780.543" y2="800.543"/><polygon fill="#A80036" points="213.5,790.543,217.5,800.543,221.5,790.543,217.5,794.543" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d0c4db73af93ebe3f7bd3b9f32dc2ccc]
@startuml
skinparam backgroundColor #FFFAFA
skinparam defaultTextAlignment center
start
: User Apply KubeadmControlPlane CR \n and NestedMachineTemplate CR;
repeat
: KubeadmControlPlane controller check \n if NestedCluster is ready;
repeat while (exist?) is (no)
->yes;
: KubeadmControlPlane controller uses the NestedMachineTemplate \n to create NestedMachines;
: KubeadmControlPlane controller generates the KubeadmConfig CR;
: KubeadmControlPlane controller sets ObjectReference \n to the KubeadmConfig CR for the owned NestedMachines;
repeat
:NestedMachines controller check \n if the KubeadmConfig is assigned to the NestedMachine;
repeat while (is attached?) is (no)
->yes;
: NestedMachine controller generates \n the static pod template;
: NestedMachine controller creates \n the statefulset objects; 
stop
@enduml

PlantUML version 1.2020.22(Sun Dec 06 01:36:27 PST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>